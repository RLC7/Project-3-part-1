#project 3

from urllib.request import urlretrieve
URL_PATH ='https://s3.amazonaws.com/tcmg476/http_access_log'
LOCAL_FILE = 'local_copy.log'

# Use urlretrieve() to fetch a remote copy and save into the local file path
local_file, headers = urlretrieve(URL_PATH, LOCAL_FILE)

# Alt.: supply an anonmymous callback function to print a simple progress bar to screen
#local_file, headers = urlretrieve(URL_PATH, LOCAL_FILE, lambda x,y,z: print('.', end='', flush=True))

fname = 'local_copy.log'
num_lines = 0
with open(fname, 'r') as f:
        for line in f:
            num_lines += 1
print('Log file accessed:')
print('   ')
print('Total requests made:', num_lines)
print('   ')

#Date counting

file  = open('local_copy.log', 'r').read()
date1  = ('01/Jan')
count1 = file.count(date1)
print("Requests for Jan 1st:", count1)

file  = open('local_copy.log', 'r').read()
date2  = ('02/Jan')
count2 = file.count(date2)
print("Requests for Jan 2nd:", count2)

file  = open('local_copy.log', 'r').read()
date3  = ('03/Jan')
count2 = file.count(date3)
print("Requests for Jan 3rd:", count3)
